# ============================================================================
# Plugin Management
# ============================================================================
# List of plugins (TPM must be last)
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'catppuccin/tmux'
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'xamut/tmux-weather'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-open'
# set -g @plugin 'tmux-plugins/tmux-yank'  # Optional: for system clipboard
set -g @plugin 'tmux-plugins/tpm'

# ============================================================================
# Basic Settings
# ============================================================================
# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1

# System info: CPU, memory, network (requires tmux-mem-cpu-load)
set -g status-right-length 80
set -g status-left-length 40
# Enable mouse support
set -g mouse on

# Set vi-mode
set-window-option -g mode-keys vi

# ============================================================================
# Key Bindings
# ============================================================================
# Change prefix key
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# Copy mode keybindings
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Window navigation
bind -n M-H previous-window
bind -n M-L next-window

# Reload config
bind r source-file ~/.tmux.conf

# ============================================================================
# Status Bar Configuration
# ============================================================================
# Position
set-option -g status-position top

# Status bar length
# set -g status-right-length 20
# set -g status-left-length 20

# ============================================================================
# Minimal Theme Configuration
# ============================================================================
# Colors
set -g default-terminal "screen-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

set -g @catppuccin_flavor "mocha"
set -g @catppuccin_window_status_style "rounded"

set -g @catppuccin_status_background "#242638"
set -g @catppuccin_status_bell_style "fg=red"

set -g @catppuccin_window_current_text " #{b:pane_current_path}"
set -g @catppuccin_window_text " #{b:pane_current_path}"

# Catppuccin will automatically configure the status bar
# You can customize modules if needed:
# set -g @catppuccin_status_modules_right "application session battery"
# set -g @catppuccin_status_modules_left "session"

# tmux-resurrect and tmux-continuum settings
set -g @continuum-restore 'on'
set -g @resurrect-capture-pane-contents 'on'
set -g @continuum-save-interval '15'

# tmux-open: no extra config needed, use 'prefix + o' to open highlighted URL/file

# Initialize TPM (keep this line at the very bottom)
# Only run if TPM is installed
if-shell 'test -d ~/.tmux/plugins/tpm' 'run "~/.tmux/plugins/tpm/tpm"'
